{% extends "base.html" %}

{% block title %}{{ summary }}{% endblock %}

{% macro r_class(reachable) %}
{%- if reachable == 0 -%}
orphaned
{%- else if reachable == 1 -%}
reachable
{%- else -%}
tracked
{%- endif -%}
{% endmacro %}

{% macro r_title(reachable) %}
{%- if reachable == 0 -%}
This commit is orphaned. It can't be reached from any ref.
{%- else if reachable == 1 -%}
This commit can only be reached from untracked refs.
{%- else -%}
This commit can be reached from a tracked ref.
{%- endif -%}
{% endmacro %}

{% block body %}
<h2>Task</h2>
<div class="task">
    <span class="id">task {{ id }}</span>
    <dl>
        <dt>Created:</dt>
        <dd>{{ date }}</dd>

        <dt>Priority:</dt>
        <dd>{{ priority }}</dd>

        <dt class="{% call r_class(reachable) %}" title="{% call r_title(reachable) %}">Commit:</dt>
        <dd class="{% call r_class(reachable) %}" title="{% call r_title(reachable) %}">
            <a href="{{ base.root }}/commit/{{ hash }}">{{ short }}</a>
        </dd>
    </dl>
</div>
{% endblock %}
